Модуль по конвертации изображений в `WEBP` формат для Yii2


1) Создать в app корне папку components (если таковой нет) и поместить CompressIMG в созданную папку.
2) В `config/web.php` указать новый компонент:

```php
'compressIMG' => [
  'class' => 'app\components\CompressIMG',
  'cacheTimeout' => 86400,
  'whitelist' => ['image/jpeg', 'image/jpg', 'image/png', 'image/webp', 'image/gif'],
  'cacheAlias' => 'uploads/thumbnail',
  'quality' => 40
],
```


__ВАЖНО!__
Не все mime типы подлежат конвертированию. В whitelist указаны проверенные.


## Пример инициализации и конвертации 

```php
$image = Yii::$app->compressIMG->cache_as_webp('images/category_menu/shop.png',512,512);
```
Если конвертирование не удалось, то в $image будет лежать false. В ином случае - путь до кешированного webp изображения.



## Параметры
1) Содержит путь до изображения. Обязательное
2) Требуемая ширина изображения. Необязательное
3) Требуемая высота изображения. Необязательное 

___Не рекомендуется___ писать следующим образом:

`1920,`, `,1080` 

Это может вызвать ошибку или привести к непредсказуемым последствиям конвертации. Например, неправильные пропорции. 

## Как правильно рассчитать пропорции

Чтобы идеально подобрать пропорции высоты и ширины – не прокатит посмотреть ширину и высоту области, куда будет подгружаться изображение через инспектор кода в браузере. Хорошим решением будет, например, воспользоваться сайтом - https://ciox.ru/aspect-ratio.

![Alt-текст](https://i.ibb.co/T2LqJDw/Opera-2022-05-06-154706-onedrive-live-com.png "Пример")

Можно вбивать любые значения в модуль и он сделает так, как вы захотите. Но если нужны четкие пропорции – сайт выше топ вариант. 

## Как работает кеширование 

Кеширование работает в автоматическом режиме.  
1) Первично - кешируются все объекты (изображения), на которые передана ссылка. 
2) При повторном обращении к странице (когда уже существуют кешированные объекты), происходит проверка на дату создания кеша. Если есть расхождения или файл кеша устарел - будет произведено обновление. 
